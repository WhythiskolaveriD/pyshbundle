
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://abhimhamane.github.io/pyshbundle/load_data/">
      
      
        <link rel="prev" href="../pyshbundle/">
      
      
        <link rel="next" href="../convert_data_formats/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Load Data - pyshbundle</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#load-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="pyshbundle" class="md-header__button md-logo" aria-label="pyshbundle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyshbundle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Load Data
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/abhimhamane/pyshbundle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="pyshbundle" class="md-nav__button md-logo" aria-label="pyshbundle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    pyshbundle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/abhimhamane/pyshbundle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/mn5hk/pyshbundle/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference Manual
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pyshbundle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pyshbundle Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Load Data
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Load Data
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#grace-processing-centers" class="md-nav__link">
    <span class="md-ellipsis">
      GRACE Processing Centers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grace-data-levels" class="md-nav__link">
    <span class="md-ellipsis">
      GRACE Data Levels
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing-of-data" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Processing of Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.read_GRACE_SH_paths" class="md-nav__link">
    <span class="md-ellipsis">
      read_GRACE_SH_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.read_GRACE_SH_paths.read_GRACE_SH_paths" class="md-nav__link">
    <span class="md-ellipsis">
      read_GRACE_SH_paths()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_jpl.reader_replacer_jpl" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_jpl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_csr.reader_replacer_csr" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_csr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_itsg.reader_replacer_itsg" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_itsg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer.reader" class="md-nav__link">
    <span class="md-ellipsis">
      reader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computing-ling-term-mean" class="md-nav__link">
    <span class="md-ellipsis">
      Computing Ling Term Mean
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.load_longterm_mean" class="md-nav__link">
    <span class="md-ellipsis">
      load_longterm_mean
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.load_longterm_mean.load_longterm_mean" class="md-nav__link">
    <span class="md-ellipsis">
      load_longterm_mean()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-and-geodetic-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Physical and Geodetic Constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.GRACEconstants" class="md-nav__link">
    <span class="md-ellipsis">
      GRACEconstants
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convert_data_formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convert Data Formats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core_functionality/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Functionality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auxillary_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auxillary Codes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../acknowledgement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acknowledgement
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#grace-processing-centers" class="md-nav__link">
    <span class="md-ellipsis">
      GRACE Processing Centers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grace-data-levels" class="md-nav__link">
    <span class="md-ellipsis">
      GRACE Data Levels
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing-of-data" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Processing of Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.read_GRACE_SH_paths" class="md-nav__link">
    <span class="md-ellipsis">
      read_GRACE_SH_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.read_GRACE_SH_paths.read_GRACE_SH_paths" class="md-nav__link">
    <span class="md-ellipsis">
      read_GRACE_SH_paths()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_jpl.reader_replacer_jpl" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_jpl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_csr.reader_replacer_csr" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_csr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer_itsg.reader_replacer_itsg" class="md-nav__link">
    <span class="md-ellipsis">
      reader_replacer_itsg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.reader_replacer.reader" class="md-nav__link">
    <span class="md-ellipsis">
      reader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computing-ling-term-mean" class="md-nav__link">
    <span class="md-ellipsis">
      Computing Ling Term Mean
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.load_longterm_mean" class="md-nav__link">
    <span class="md-ellipsis">
      load_longterm_mean
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.load_longterm_mean.load_longterm_mean" class="md-nav__link">
    <span class="md-ellipsis">
      load_longterm_mean()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-and-geodetic-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Physical and Geodetic Constants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyshbundle.GRACEconstants" class="md-nav__link">
    <span class="md-ellipsis">
      GRACEconstants
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="load-data">Load Data<a class="headerlink" href="#load-data" title="Permanent link">&para;</a></h1>
<h2 id="grace-processing-centers">GRACE Processing Centers<a class="headerlink" href="#grace-processing-centers" title="Permanent link">&para;</a></h2>
<p>There are 3 major research centers which disseminate GRACE data. These are:</p>
<ul>
<li><a href="https://www.csr.utexas.edu/">University of Texas at Austin, Center for Space Research (CSR)</a></li>
<li><a href="https://grace.jpl.nasa.gov/">Jet Propulsion Laboratory (JPL)</a></li>
<li><a href="https://www.gfz-potsdam.de/en/">German Research Center for Geosciences (GFZ)</a></li>
</ul>
<h2 id="grace-data-levels">GRACE Data Levels<a class="headerlink" href="#grace-data-levels" title="Permanent link">&para;</a></h2>
<p>GRACE data is available at different processing levels:</p>
<ul>
<li>Level 1: Raw satellite data<ul>
<li>Level 1A: </li>
<li>Level 1B:</li>
</ul>
</li>
<li>Level 2: Spherical Harmonic Coefficients for the geopotential estimates</li>
<li>Level 3: consists of mass anomalies or other standardized products such as Monthly Ocean/Land Water Equivalent Thickness, Surface-Mass Anomaly. Similarly mass concentration blocks or <code>mascons</code> are also available.</li>
<li>Level 4: Time-series of catchment level hydrological estimates of TWSA</li>
</ul>
<p><code>PySHBundle</code> provides the capability to obtain grided Total Water Storage Anomaly(TWSA) from Level 2 data.</p>
<h2 id="pre-processing-of-data">Pre-Processing of Data<a class="headerlink" href="#pre-processing-of-data" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="pyshbundle.read_GRACE_SH_paths"></a>
  <div class="doc doc-contents first">
  
      <p>The purpose of this script is to,
firstly read what the data source is (JPL, CSR or ITSG)
read file path for GRACE L2 spherical harmonics inputs,
read replacement files for tn13 and tn14
source of the SH files (JPL, ITSG or CSR)</p>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="pyshbundle.read_GRACE_SH_paths.read_GRACE_SH_paths" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">read_GRACE_SH_paths</span><span class="p">(</span><span class="n">use_sample_files</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#pyshbundle.read_GRACE_SH_paths.read_GRACE_SH_paths" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns path of data files, path of tn13 and path of tn14 replacement files</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>use_sample_files</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em>. Defaults to 0.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Exception</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>_type_</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pyshbundle/read_GRACE_SH_paths.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read_GRACE_SH_paths</span><span class="p">(</span><span class="n">use_sample_files</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns path of data files, path of tn13 and path of tn14 replacement files</span>

<span class="sd">    Args:</span>
<span class="sd">        use_sample_files (int, optional): _description_. Defaults to 0.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This program supports working with GRACE L2 Spherical harmonics data from the following centers: CSR, JPL and ITSG&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instructions to download data may be referred to in https://github.com/mn5hk/pyshbundle/blob/main/docs/index.md#how-to-download-data&quot;</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the source of L2 SH coeffs code(jpl, csr, gfz): &quot;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">use_sample_files</span> <span class="o">==</span><span class="mi">1</span><span class="p">:</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You have chosen to use sample replacement files.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The replacement files for the TN13 and TN14 parameters have been preloaded into the program&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Due to the size of the GRACE SH files, these have not been preloaded into the program&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You may download the GRACE SH L2 files from the link below. Please ensure to download the files as per your selection of source in the prior step&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Download sample files from: https://github.com/mn5hk/pyshbundle/tree/main/sample_input_data&quot;</span><span class="p">)</span>
    <span class="n">path_sh</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the folder with SH L2 data&quot;</span><span class="p">))</span>


    <span class="k">if</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;JPL&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">use_sample_files</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_JPL_TN_files/TN-13_GEOC_JPL_RL06.txt&#39;</span><span class="p">)</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_JPL_TN_files/TN-14_C30_C20_GSFC_SLR.txt&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded preloaded TN13 and TN14 replacement files for JPL&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn13 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn14 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded TN13 and TN14 replacement files for JPL&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;CSR&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">use_sample_files</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_CSR_TN_files/TN-14_C30_C20_SLR_GSFC.txt&#39;</span><span class="p">)</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_CSR_TN_files/TN-13_GEOC_CSR_RL06.1.txt&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded preloaded TN13 and TN14 replacement files for CSR&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn13 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn14 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded TN13 and TN14 replacement files for CSR&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ITSG&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">use_sample_files</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_ITSG_TN_files/TN-13_GEOC_CSR_RL06.1.txt&#39;</span><span class="p">)</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/sample_ITSG_TN_files/TN-14_C30_C20_SLR_GSFC.txt&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded preloaded TN13 and TN14 replacement files for ITSG&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_tn13</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn13 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="n">path_tn14</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the path to the file for tn14 replacement in .txt format&quot;</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded TN13 and TN14 replacement files for ITSG&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Source selection is incorrect. Please select between JPL, CSR or gfz&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">path_sh</span><span class="p">,</span> <span class="n">path_tn13</span><span class="p">,</span> <span class="n">path_tn14</span><span class="p">,</span> <span class="n">source</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>


<div class="doc doc-object doc-function">



<a id="pyshbundle.reader_replacer_jpl.reader_replacer_jpl"></a>
  <div class="doc doc-contents first">
  
      <p>Replaces the certain coefficients with other given coeff.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>path_tn14</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>path_tn13</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>_type_</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pyshbundle/reader_replacer_jpl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reader_replacer_jpl</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">path_tn14</span><span class="p">,</span> <span class="n">path_tn13</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Replaces the certain coefficients with other given coeff.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str): _description_</span>
<span class="sd">        path_tn14 (str): _description_</span>
<span class="sd">        path_tn13 (str): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">filenames</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>  <span class="c1"># Names of files in folder</span>
    <span class="c1"># Identify the data product source</span>
    <span class="k">if</span> <span class="s1">&#39;GFZ&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;GFZ&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;CSR&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;CSR&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;JPL&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;JPL&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;ITSG&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;ITSG&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">aa</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">last_4chars</span><span class="p">)</span>  <span class="c1"># when does your data start at ?</span>
    <span class="n">year_start</span> <span class="o">=</span> <span class="n">aa</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
    <span class="n">time_axes</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Counts the number of files</span>
    <span class="n">no_of_files</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="n">line_num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oi</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">degree</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">order</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>

    <span class="c1"># Iterate through all files</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">last_4chars</span><span class="p">):</span>
        <span class="c1"># print(file)</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gz&quot;</span><span class="p">):</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="c1"># print(file_name[-39:-32])</span>

            <span class="c1"># Save yearwise</span>
            <span class="n">year_start</span><span class="p">,</span> <span class="n">time_axes</span> <span class="o">=</span> <span class="n">TIME</span><span class="p">(</span><span class="n">year_start</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">time_axes</span><span class="p">)</span>

            <span class="c1"># Call the function &#39;reader&#39;</span>
            <span class="n">reader</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">line_num</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">clm</span><span class="p">,</span> <span class="n">slm</span><span class="p">,</span> <span class="n">slm_std</span><span class="p">,</span>
                   <span class="n">clm_std</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">year_start</span><span class="p">,</span> <span class="n">time_axes</span><span class="p">)</span>
            <span class="n">no_of_files</span> <span class="o">=</span> <span class="n">no_of_files</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reading into clm format complete!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of files read:&quot;</span><span class="p">,</span> <span class="n">no_of_files</span><span class="p">)</span>

    <span class="n">Lmax</span> <span class="o">=</span> <span class="n">degree</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">degree_order</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Replacement</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting replacement&#39;</span><span class="p">)</span>

    <span class="c1"># Replace deg 2,3</span>
    <span class="n">new_file_TN14</span> <span class="o">=</span> <span class="n">path_tn14</span>

    <span class="n">rep_start_date</span><span class="p">,</span> <span class="n">rep_end_date</span><span class="p">,</span> <span class="n">c20</span><span class="p">,</span> <span class="n">c30</span><span class="p">,</span> <span class="n">c20_sigma</span><span class="p">,</span> <span class="n">c30_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN14</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;Product:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line_num</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Replacement data not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c20</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">c30</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
            <span class="n">c20_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">c30_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">rep_start_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">rep_end_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># Actual replacement</span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">c20</span><span class="p">)):</span>

                <span class="n">curr_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]</span>
                <span class="n">rep_date_cmp</span> <span class="o">=</span> <span class="n">rep_start_date</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">curr_date</span> <span class="o">==</span> <span class="n">rep_date_cmp</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="n">rep_date_cmp</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)]</span> <span class="o">=</span> <span class="n">c20</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)]</span> <span class="o">=</span> <span class="n">c20_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                        <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span>
                                      <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 2,3 replacement complete!&#39;</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Replace deg 1 &#39;&#39;&#39;</span>
    <span class="n">new_file_TN13</span> <span class="o">=</span> <span class="n">path_tn13</span>
    <span class="n">rep_start_date_deg1</span><span class="p">,</span> <span class="n">rep_end_date_deg1</span><span class="p">,</span> <span class="n">c1m</span><span class="p">,</span> <span class="n">s1m</span><span class="p">,</span> <span class="n">c1m_sigma</span><span class="p">,</span> <span class="n">s1m_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN13</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;end of header ===============================================================================</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="n">s1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
            <span class="n">c1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">s1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">rep_start_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">rep_end_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># replace deg 1</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">c1m</span><span class="p">)):</span>

                <span class="n">curr_date_deg1</span> <span class="o">=</span> <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
                <span class="n">rep_date_cmp_deg1</span> <span class="o">=</span> <span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">curr_date_deg1</span> <span class="o">==</span> <span class="n">rep_date_cmp_deg1</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">curr_date_deg1</span><span class="p">,</span> <span class="n">rep_date_cmp_deg1</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                    <span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                    <span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                    <span class="n">order</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                    <span class="n">order</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
                                     <span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
                                     <span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">end_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">rep_end_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">end_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                        <span class="n">y</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">rep_end_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">2</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 1 replacement complete!&#39;</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Add degree 0 coeffs (zeros) &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="nb">int</span><span class="p">(</span><span class="n">degree_order</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">order</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">end_date</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">,</span> <span class="n">end_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Save everything in a list &#39;&#39;&#39;</span>
    <span class="n">saved_as_num</span> <span class="o">=</span> <span class="p">[</span><span class="n">degree</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">clm</span><span class="p">,</span> <span class="n">slm</span><span class="p">,</span>
                    <span class="n">clm_std</span><span class="p">,</span> <span class="n">slm_std</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">]</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Number of years &#39;&#39;&#39;</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">beta</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">)</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">beta</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Finding the dates for time bounds of data &#39;&#39;&#39;</span>
    <span class="n">dates_start</span><span class="p">,</span> <span class="n">dates_end</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">beta</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">dates_start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]))</span>
            <span class="n">dates_end</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]))</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of months of data in each year starting&quot;</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
          <span class="s2">&quot;&amp; ending&quot;</span><span class="p">,</span> <span class="n">dates_end</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">beta</span><span class="p">)</span>

    <span class="c1"># import pickle</span>
    <span class="c1"># with open(&quot;/home/wslvivek/Desktop/level2/pysh_v2/output/saved_as_num&quot;,&quot;wb&quot;) as pk:</span>
    <span class="c1">#     pickle.dump(saved_as_num, pk)</span>

    <span class="k">return</span> <span class="n">saved_as_num</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">,</span> <span class="n">dates_end</span><span class="p">,</span> <span class="n">no_of_files</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<a id="pyshbundle.reader_replacer_csr.reader_replacer_csr"></a>
  <div class="doc doc-contents first">

          <details class="quote">
            <summary>Source code in <code>pyshbundle/reader_replacer_csr.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reader_replacer_csr</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">path_tn14</span><span class="p">,</span> <span class="n">path_tn13</span><span class="p">):</span>

    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">filenames</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="c1">#Names of files in folder</span>
    <span class="c1"># Identify the data product source</span>
    <span class="k">if</span> <span class="s1">&#39;GFZ&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;GFZ&#39;</span><span class="p">)</span>  
    <span class="k">elif</span> <span class="s1">&#39;CSR&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;CSR&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;JPL&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;JPL&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;ITSG&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;ITSG&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">aa</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">last_4chars</span><span class="p">)</span>  <span class="c1">#when does your data start at ?</span>
    <span class="n">year_start</span> <span class="o">=</span> <span class="n">aa</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
    <span class="n">time_axes</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Counts the number of files</span>
    <span class="n">no_of_files</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="n">line_num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oi</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">degree</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">order</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>

    <span class="c1"># Iterate through all files</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">last_4chars</span><span class="p">):</span>
        <span class="c1">#print(file)</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gz&quot;</span><span class="p">):</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="c1"># print(file_name[-39:-32])</span>

            <span class="c1"># Save yearwise</span>
            <span class="n">year_start</span><span class="p">,</span> <span class="n">time_axes</span> <span class="o">=</span> <span class="n">TIME</span><span class="p">(</span><span class="n">year_start</span><span class="p">,</span><span class="n">file_name</span><span class="p">,</span><span class="n">time_axes</span><span class="p">)</span>

            <span class="c1"># Call the function &#39;reader&#39;</span>
            <span class="n">reader</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="n">line_num</span><span class="p">,</span><span class="n">degree</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">clm</span><span class="p">,</span><span class="n">slm</span><span class="p">,</span><span class="n">clm_std</span><span class="p">,</span><span class="n">slm_std</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">,</span><span class="n">year_start</span><span class="p">,</span><span class="n">time_axes</span><span class="p">)</span>
            <span class="n">no_of_files</span> <span class="o">=</span> <span class="n">no_of_files</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reading into klm format complete!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of files read:&quot;</span><span class="p">,</span> <span class="n">no_of_files</span><span class="p">)</span>

    <span class="n">Lmax</span><span class="o">=</span><span class="n">degree</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">degree_order</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#&#39;&#39;&#39; Replacement &#39;&#39;&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting replacement&#39;</span><span class="p">)</span>
   <span class="c1"># &#39;&#39;&#39; Replace deg 2,3 &#39;&#39;&#39;</span>
    <span class="n">new_file_TN14</span> <span class="o">=</span> <span class="n">path_tn14</span>
    <span class="n">rep_start_date</span><span class="p">,</span> <span class="n">rep_end_date</span><span class="p">,</span> <span class="n">c20</span><span class="p">,</span> <span class="n">c30</span><span class="p">,</span> <span class="n">c20_sigma</span><span class="p">,</span> <span class="n">c30_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN14</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
            <span class="k">if</span>  <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;Product:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line_num</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Replacement data not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c20</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c30</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c20_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">c30_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">rep_start_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">rep_end_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># Actual replacement    </span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">margin</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># index = 0</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>    
            <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">c20</span><span class="p">)):</span>

                <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">rep_date_cmp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">rep_start_date</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="k">if</span>  <span class="n">rep_date_cmp</span><span class="o">-</span><span class="n">margin</span> <span class="o">&lt;=</span> <span class="n">curr_date</span> <span class="o">&lt;=</span> <span class="n">rep_date_cmp</span><span class="o">+</span><span class="n">margin</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">curr_date</span><span class="p">,</span> <span class="n">rep_date_cmp</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">c20</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">c20_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">1</span>
                    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                        <span class="c1"># NOTE: rectified from slm_dev -&gt; clm_dev</span>
                        <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>   
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">1</span>                           
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 2,3 replacement complete!&#39;</span><span class="p">)</span>

    <span class="c1">#&#39;&#39;&#39; Replace deg 1 &#39;&#39;&#39;</span>
    <span class="n">new_file_TN13</span> <span class="o">=</span> <span class="n">path_tn13</span>  
    <span class="n">rep_start_date_deg1</span><span class="p">,</span> <span class="n">rep_end_date_deg1</span><span class="p">,</span> <span class="n">c1m</span><span class="p">,</span> <span class="n">s1m</span><span class="p">,</span> <span class="n">c1m_sigma</span><span class="p">,</span> <span class="n">s1m_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN13</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span>  <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;end of header ===============================================================================</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">s1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">s1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">rep_start_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">rep_end_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span> 

    <span class="c1"># replace deg 1   </span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Lmax</span> <span class="o">=</span> <span class="n">degree</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">margin_deg1</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>    
            <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">c1m</span><span class="p">)):</span>
                <span class="n">curr_date_deg1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">rep_date_cmp_deg1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="k">if</span>  <span class="n">rep_date_cmp_deg1</span><span class="o">-</span><span class="n">margin_deg1</span> <span class="o">&lt;=</span> <span class="n">curr_date_deg1</span> <span class="o">&lt;=</span> <span class="n">rep_date_cmp_deg1</span><span class="o">+</span><span class="n">margin_deg1</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">curr_date_deg1</span><span class="p">,</span> <span class="n">rep_date_cmp_deg1</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                    <span class="c1"># degree[year][y*degree_order+1] = int(1)</span>
                    <span class="c1"># degree[year][y*degree_order+1+Lmax] = int(1)</span>
                    <span class="c1"># order[year][y*degree_order+1] = int(0)</span>
                    <span class="c1"># order[year][y*degree_order+1+Lmax] = int(1)</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">Lmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">Lmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">Lmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">Lmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">2</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 1 replacement complete!&#39;</span><span class="p">)</span> 

    <span class="c1">#&#39;&#39;&#39; Save everything in a list &#39;&#39;&#39;</span>
    <span class="n">saved_as_num</span><span class="o">=</span><span class="p">[</span><span class="n">degree</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">clm</span><span class="p">,</span><span class="n">slm</span><span class="p">,</span><span class="n">clm_std</span><span class="p">,</span><span class="n">slm_std</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">]</span>

    <span class="c1">#&#39;&#39;&#39; Number of years &#39;&#39;&#39;</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">beta</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">)</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span> 

    <span class="c1">#&#39;&#39;&#39; Finding the dates dates_csrfor time bounds of data &#39;&#39;&#39;</span>
    <span class="n">dates_start</span><span class="p">,</span> <span class="n">dates_end</span> <span class="o">=</span> <span class="p">[],[]</span> 
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">beta</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">dates_start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]))</span>
            <span class="n">dates_end</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]))</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of months of data in each year starting&quot;</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> \
          <span class="s2">&quot;&amp; ending&quot;</span><span class="p">,</span> <span class="n">dates_end</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">beta</span><span class="p">)</span>   

    <span class="c1">#import pickle</span>
    <span class="c1">#with open(&quot;/home/wslvivek/Desktop/level2/pysh_v2/output/saved_as_num&quot;,&quot;wb&quot;) as pk:</span>
    <span class="c1">#    pickle.dump(saved_as_num, pk)</span>
    <span class="k">return</span> <span class="n">saved_as_num</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">,</span><span class="n">dates_end</span><span class="p">,</span> <span class="n">no_of_files</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<a id="pyshbundle.reader_replacer_itsg.reader_replacer_itsg"></a>
  <div class="doc doc-contents first">
  
      <p><em>summary</em></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>path_tn14</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>path_tn13</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>_type_</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pyshbundle/reader_replacer_itsg.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reader_replacer_itsg</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">path_tn14</span><span class="p">,</span> <span class="n">path_tn13</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>

<span class="sd">    Args:</span>
<span class="sd">        path (_type_): _description_</span>
<span class="sd">        path_tn14 (_type_): _description_</span>
<span class="sd">        path_tn13 (_type_): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">filenames</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>       <span class="c1">#Names of files in folder    </span>
    <span class="c1"># Identify the data product source</span>
    <span class="k">if</span> <span class="s1">&#39;GFZ&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;GFZ&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;CSR&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;CSR&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;JPL&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;JPL&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;ITSG&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;ITSG&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">aa</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">last_4chars</span><span class="p">)</span> <span class="c1">#when does your data start at ?</span>
    <span class="n">year_start</span> <span class="o">=</span> <span class="n">aa</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">11</span><span class="p">:</span><span class="o">-</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">time_axes</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Counts the number of files</span>
    <span class="n">no_of_files</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="c1"># Empty numpy arrays to store variables</span>
    <span class="n">line_num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oi</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">degree</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">order</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">clm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">slm_std</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">oi</span><span class="p">)]</span>

    <span class="c1"># Iterate through all files</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">last_4chars</span><span class="p">):</span>
        <span class="c1">#print(file)</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gfc&quot;</span><span class="p">):</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="c1">#print(file_name[-39:-32])</span>

            <span class="c1"># Save yearwise</span>
            <span class="n">year_start</span><span class="p">,</span> <span class="n">time_axes</span> <span class="o">=</span> <span class="n">TIME</span><span class="p">(</span><span class="n">year_start</span><span class="p">,</span><span class="n">file_name</span><span class="p">,</span><span class="n">time_axes</span><span class="p">)</span>

            <span class="c1"># Call the function &#39;reader&#39;</span>
            <span class="n">reader</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="n">line_num</span><span class="p">,</span><span class="n">degree</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">clm</span><span class="p">,</span><span class="n">slm</span><span class="p">,</span><span class="n">clm_std</span><span class="p">,</span><span class="n">slm_std</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">year_start</span><span class="p">,</span><span class="n">time_axes</span><span class="p">)</span>
            <span class="n">no_of_files</span> <span class="o">=</span> <span class="n">no_of_files</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reading into clm format complete!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of files read:&quot;</span><span class="p">,</span> <span class="n">no_of_files</span><span class="p">)</span>

    <span class="n">Lmax</span><span class="o">=</span><span class="n">degree</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">degree_order</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Lmax</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Replacement &#39;&#39;&#39;</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting replacement&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39; Replace deg 2,3 &#39;&#39;&#39;</span>
    <span class="n">new_file_TN14</span> <span class="o">=</span> <span class="n">path_tn14</span>

    <span class="n">rep_start_date</span><span class="p">,</span> <span class="n">rep_end_date</span><span class="p">,</span> <span class="n">c20</span><span class="p">,</span> <span class="n">c30</span><span class="p">,</span> <span class="n">c20_sigma</span><span class="p">,</span> <span class="n">c30_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN14</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
            <span class="k">if</span>  <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;Product:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line_num</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Replacement data not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c20</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c30</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c20_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">c30_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="o">*</span><span class="mf">1e-10</span><span class="p">)</span>
            <span class="n">rep_start_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">rep_end_date</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">julian</span><span class="o">.</span><span class="n">from_jd</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">]),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;mjd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># Actual replacement    </span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">margin</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">23</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>    
            <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">c20</span><span class="p">)):</span>

                <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">],</span> <span class="s1">&#39;%Y-%m&#39;</span><span class="p">)</span>
                <span class="n">rep_date_cmp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">rep_start_date</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">rep_date_cmp</span><span class="o">-</span><span class="n">margin</span> <span class="o">&lt;=</span> <span class="n">curr_date</span> <span class="o">&lt;=</span> <span class="n">rep_date_cmp</span><span class="o">+</span><span class="n">margin</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data date - </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">, replacemebt date (tn-14) = </span><span class="si">{</span><span class="n">rep_date_cmp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c20</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">c20_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">])</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                        <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">c30_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">index</span><span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>   
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">1</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 2,3 replacement complete!&#39;</span><span class="p">)</span>


<span class="w">    </span><span class="sd">&#39;&#39;&#39; Replace deg 1 &#39;&#39;&#39;</span>
    <span class="n">new_file_TN13</span> <span class="o">=</span> <span class="n">path_tn13</span>
    <span class="n">rep_start_date_deg1</span><span class="p">,</span> <span class="n">rep_end_date_deg1</span><span class="p">,</span> <span class="n">c1m</span><span class="p">,</span> <span class="n">s1m</span><span class="p">,</span> <span class="n">c1m_sigma</span><span class="p">,</span> <span class="n">s1m_sigma</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">new_file_TN13</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span>  <span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;end of header ===============================================================================</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;found:&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">line_num</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>
            <span class="n">c1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">s1m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">c1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">s1m_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">rep_start_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">rep_end_date_deg1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span> 

    <span class="c1"># replace deg 1   </span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">margin</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">23</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>    
            <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">c1m</span><span class="p">)):</span>

                <span class="n">curr_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="p">],</span> <span class="s1">&#39;%Y-%m&#39;</span><span class="p">)</span>
                <span class="n">rep_date_cmp_deg1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">rep_date_cmp_deg1</span><span class="o">-</span><span class="n">margin</span> <span class="o">&lt;=</span> <span class="n">curr_date</span> <span class="o">&lt;=</span><span class="n">rep_date_cmp_deg1</span><span class="o">+</span><span class="n">margin</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data date - </span><span class="si">{</span><span class="n">curr_date</span><span class="si">}</span><span class="s2">, replacemebt date (tn-13) = </span><span class="si">{</span><span class="n">rep_date_cmp_deg1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">degree</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">order</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">order</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">clm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">c1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">slm</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">s1m</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">clm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">c1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="n">slm_std</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">s1m_sigma</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="n">start_date</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">y</span><span class="o">*</span><span class="n">degree_order</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="n">rep_start_date_deg1</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">2</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span><span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Degree 1 replacement complete!&#39;</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Save everything in a list &#39;&#39;&#39;</span>
    <span class="n">saved_as_num</span><span class="o">=</span><span class="p">[</span><span class="n">degree</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">clm</span><span class="p">,</span><span class="n">slm</span><span class="p">,</span><span class="n">clm_std</span><span class="p">,</span><span class="n">slm_std</span><span class="p">,</span><span class="n">start_date</span><span class="p">]</span>
    <span class="c1"># import pickle</span>
    <span class="c1"># with open(&quot;/home/wslvivek/Desktop/level2/pysh_v2/output/saved_as_num&quot;,&quot;wb&quot;) as pk:</span>
    <span class="c1">#     pickle.dump(saved_as_num, pk)</span>


<span class="w">    </span><span class="sd">&#39;&#39;&#39; Number of years &#39;&#39;&#39;</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">beta</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">/</span><span class="n">degree_order</span><span class="p">)</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">beta</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39; Finding the dates for time bounds of data &#39;&#39;&#39;</span>
    <span class="n">dates_start</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">time_axes</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">beta</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">dates_start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">*</span><span class="n">degree_order</span><span class="p">]))</span>
            <span class="c1"># dates_end.append(str(end_date[i][j*int(degree_order-3)]))</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of months of data in each year starting&quot;</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">beta</span><span class="p">)</span> <span class="c1">#dates_end[-1], beta)       </span>
    <span class="k">return</span> <span class="n">saved_as_num</span><span class="p">,</span> <span class="n">dates_start</span><span class="p">,</span> <span class="n">no_of_files</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<a id="pyshbundle.reader_replacer.reader"></a>
  <div class="doc doc-contents first">
  
      <p>Function to read files &amp; extract data</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>line_num</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>degree</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>order</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>clm</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>slm</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>delta_clm</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>delta_slm</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year_start</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>time_axes</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pyshbundle/reader_replacer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reader</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">line_num</span><span class="p">,</span> <span class="n">degree</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">clm</span><span class="p">,</span><span class="n">slm</span><span class="p">,</span><span class="n">delta_clm</span><span class="p">,</span><span class="n">delta_slm</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">,</span><span class="n">year_start</span><span class="p">,</span><span class="n">time_axes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to read files &amp; extract data</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (_type_): _description_</span>
<span class="sd">        line_num (_type_): _description_</span>
<span class="sd">        degree (_type_): _description_</span>
<span class="sd">        order (_type_): _description_</span>
<span class="sd">        clm (_type_): _description_</span>
<span class="sd">        slm (_type_): _description_</span>
<span class="sd">        delta_clm (_type_): _description_</span>
<span class="sd">        delta_slm (_type_): _description_</span>
<span class="sd">        start_date (_type_): _description_</span>
<span class="sd">        end_date (_type_): _description_</span>
<span class="sd">        year_start (_type_): _description_</span>
<span class="sd">        time_axes (_type_): _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">stuff</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">stuff</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
            <span class="c1">#print(str(line))</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="sa">b</span><span class="s1">&#39;# End of YAML header</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,):</span>
                <span class="c1">#print(&quot;found:&quot;,i+1)</span>
                <span class="n">line_num</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>                                                 <span class="c1">#Line number of starting line of data</span>
                <span class="k">break</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;\s+&#39;</span>                                                        <span class="c1">#Delimiter for splitting                                                          </span>
        <span class="k">while</span><span class="p">(</span><span class="n">line_num</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">stuff</span><span class="p">)):</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>  <span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">stuff</span><span class="p">[</span><span class="n">line_num</span><span class="p">]))</span>                  <span class="c1">#split wordwise with Regex</span>
            <span class="n">degree</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="p">)</span>
            <span class="n">order</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span>    <span class="p">)</span>
            <span class="n">clm</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">3</span><span class="p">])</span>    <span class="p">)</span>
            <span class="n">slm</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">4</span><span class="p">])</span>    <span class="p">)</span>
            <span class="n">delta_clm</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">split</span> <span class="p">[</span><span class="mi">5</span><span class="p">])</span>    <span class="p">)</span>
            <span class="n">delta_slm</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="nb">float</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>    <span class="p">)</span>
            <span class="n">start_date</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>  <span class="p">)</span>
            <span class="n">end_date</span><span class="p">[</span><span class="n">time_axes</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">split</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>  <span class="p">)</span>
            <span class="n">line_num</span> <span class="o">=</span> <span class="n">line_num</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h2 id="computing-ling-term-mean">Computing Ling Term Mean<a class="headerlink" href="#computing-ling-term-mean" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="pyshbundle.load_longterm_mean"></a>
  <div class="doc doc-contents first">
  
      <p>The purpose of this script is to,
load longterm mean for our GRACE SH data</p>
<p>For this, we need to input the GRACE data source as well as the path to the longterm mean values
Data source may be CSR, JPL or ITSG.</p>
<p>For RL06, example data have been provided within the package. In case this option is chosen, the program directly returns the longterm mean values.</p>
<p>Returns the long_mean path</p>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h2 id="pyshbundle.load_longterm_mean.load_longterm_mean" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_longterm_mean</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">use_sample_mean</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#pyshbundle.load_longterm_mean.load_longterm_mean" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p><em>summary</em></p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>source</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em>. Defaults to "".</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>use_sample_mean</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em>. Defaults to 0.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Exception</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>_type_</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="todo" open>
  <summary>Todo</summary>
  <ul>
<li>Not sure if using "source = ''" is all right</li>
<li>instead of base eception is can be ValueError</li>
</ul>
</details>
          <details class="quote">
            <summary>Source code in <code>pyshbundle/load_longterm_mean.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_longterm_mean</span><span class="p">(</span><span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">use_sample_mean</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;_summary_</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str, optional): _description_. Defaults to &quot;&quot;.</span>
<span class="sd">        use_sample_mean (int, optional): _description_. Defaults to 0.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: _description_</span>

<span class="sd">    Todo:</span>
<span class="sd">        + Not sure if using &quot;source = &#39;&#39;&quot; is all right</span>
<span class="sd">        + instead of base eception is can be ValueError</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">use_sample_mean</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading preloaded RL06 long term mean values&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please ensure that your data is RL06 </span><span class="se">\n</span><span class="s2">If not, please manually input long term mean by setting use_sample_mean = 0&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;CSR&#39;</span><span class="p">:</span>
            <span class="n">long_mean</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/RL06_long_mean/SH_long_mean_csr.npy&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;JPL&#39;</span><span class="p">:</span>
            <span class="n">long_mean</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/RL06_long_mean/SH_long_mean_itsg.npy&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ITSG&#39;</span><span class="p">:</span>
            <span class="n">long_mean</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s1">&#39;pyshbundle&#39;</span><span class="p">,</span> <span class="s1">&#39;data/RL06_long_mean/SH_long_mean_jpl.npy&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Incorrect selection of source&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded preloaded longterm means&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please download and provide the longterm GRACE SH mean values&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instructions to download the longterm GRACE SH mean values may be referred to in https://github.com/mn5hk/pyshbundle/blob/main/docs/index.md#how-to-download-data&quot;</span><span class="p">)</span>
        <span class="n">long_mean</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the longterm mean for the SH values in the numpy (.npy) format&quot;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully loaded path to long term mean:&quot;</span><span class="p">,</span> <span class="n">long_mean</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">long_mean</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h2 id="physical-and-geodetic-constants">Physical and Geodetic Constants<a class="headerlink" href="#physical-and-geodetic-constants" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<a id="pyshbundle.GRACEconstants"></a>
  <div class="doc doc-contents first">
  
      <p>This script contains some of the major relavant Physical and Geodetic(GRS80) constants:</p>
<ul>
<li><code>clight</code> speed of light - <span class="arithmatex">\(2.99792458e+8\)</span> <span class="arithmatex">\(m/s\)</span></li>
<li><code>G</code> Gravitational constant- <span class="arithmatex">\(6.67259e-11\)</span> $rac{m^3} {kg \cdot s^2}$</li>
<li>
<p><code>au</code> astronomical unit - <span class="arithmatex">\(149.597870691e+9\)</span> <span class="arithmatex">\(m\)</span></p>
</li>
<li>
<p><code>ae</code> semi-major axis of ellipsoid <code>GRS 80</code>- <span class="arithmatex">\(6378137\)</span> m</p>
</li>
<li><code>GM</code> geocentric grav. constant <code>GRS 80</code>- <span class="arithmatex">\(3.986005e+14\)</span> $rac{m^3}{s^2}$</li>
<li><code>J2</code> earth's dynamic form factor <code>GRS 80</code> - <span class="arithmatex">\(1.08263e-3\)</span> [unitless C20 unnormalized coefficient]</li>
<li>
<p><code>Omega</code> mean ang. velocity <code>GRS 80</code> - $7.292115e-5 $rac{rad}{s}$</p>
</li>
<li>
<p><code>flat</code> flattening - $rac{1}{298.257222101}$</p>
</li>
</ul>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    2024-01-07
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>